include:
  - local: 'v1/common/templates.yml'

#Quality Gate: ReadyAPI Regression

#Feature DEV
Regression_Feature[UO-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke_Feature[UO-DEV]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: dev
  rules:
    - if: $DEVOPS_QG_OVERRIDE_REGRESSION_TESTS || $DEVOPS_QG_OVERRIDE
      when: never
    - if: $CI_COMMIT_BRANCH =~ /^feature/
      exists:
        - k8s/$TMPL_DATACENTER/$TMPL_ENVIRONMENT_NAME.yml
      when: manual

Regression_Feature[USH-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke_Feature[USH-DEV]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: dev
  rules:
    - if: $DEVOPS_QG_OVERRIDE_REGRESSION_TESTS || $DEVOPS_QG_OVERRIDE
      when: never
    - if: $CI_COMMIT_BRANCH =~ /^feature/
      exists:
        - k8s/$TMPL_DATACENTER/$TMPL_ENVIRONMENT_NAME.yml
      when: manual

Regression_Feature[USJ-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke_Feature[USJ-DEV]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: dev
  rules:
    - if: $DEVOPS_QG_OVERRIDE_REGRESSION_TESTS || $DEVOPS_QG_OVERRIDE
      when: never
    - if: $CI_COMMIT_BRANCH =~ /^feature/
      exists:
        - k8s/$TMPL_DATACENTER/$TMPL_ENVIRONMENT_NAME.yml
      when: manual

Regression_Feature[EASTUS-AZURE-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke_Feature[EASTUS-AZURE-DEV]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: dev
  rules:
    - if: $DEVOPS_QG_OVERRIDE_REGRESSION_TESTS || $DEVOPS_QG_OVERRIDE
      when: never
    - if: $CI_COMMIT_BRANCH =~ /^feature/
      exists:
        - k8s/$TMPL_DATACENTER/$TMPL_ENVIRONMENT_NAME.yml
      when: manual

#DEV
Regression[UO-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[UO-DEV]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: dev

Regression[USH-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[USH-DEV]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: dev

Regression[USJ-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[USJ-DEV]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: dev

Regression[EASTUS-AZURE-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[EASTUS-AZURE-DEV]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: dev

#QA
Regression[UO-QA]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[UO-QA]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: qa

Regression[USH-QA]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[USH-QA]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: qa

Regression[USJ-QA]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[USJ-QA]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: qa

Regression[EASTUS-AZURE-QA]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[EASTUS-AZURE-QA]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: qa

#UAT
Regression[UO-UAT]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[UO-UAT]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: uat

Regression[USH-UAT]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[USH-UAT]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: uat

Regression[USJ-UAT]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[USJ-UAT]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: uat

Regression[EASTUS-AZURE-UAT]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[EASTUS-AZURE-UAT]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: uat

#STG
Regression[UO-STG]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[UO-STG]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: stg

Regression[USH-STG]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[USH-STG]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: stg

Regression[USJ-STG]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[USJ-STG]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: stg

Regression[EASTUS-AZURE-STG]:
  extends: .readyAPI_template
  stage: Quality_Gate[Regression]
  needs:
    - job: Semver
    - job: Smoke[EASTUS-AZURE-STG]
      optional: true
  variables:
    TMPL_RAPI_TEST_TYPE: Regression
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: stg
