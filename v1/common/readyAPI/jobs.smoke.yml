include:
  - local: 'v1/common/templates.yml'

#Quality Gate: ReadyAPI Smoke

#Feature DEV
Smoke_Feature[UO-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy_Feature[UO-DEV]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: dev
  rules:
    - if: $DEVOPS_QG_OVERRIDE_SMOKE_TESTS || $DEVOPS_QG_OVERRIDE
      when: never
    - if: $CI_COMMIT_BRANCH =~ /^feature/
      exists:
        - k8s/$TMPL_DATACENTER/dev.yml
      when: on_success

Smoke_Feature[USH-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy_Feature[USH-DEV]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: dev
  rules:
    - if: $DEVOPS_QG_OVERRIDE_SMOKE_TESTS || $DEVOPS_QG_OVERRIDE
      when: never
    - if: $CI_COMMIT_BRANCH =~ /^feature/
      exists:
        - k8s/$TMPL_DATACENTER/dev.yml
      when: on_success

Smoke_Feature[USJ-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy_Feature[USJ-DEV]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: dev
  rules:
    - if: $DEVOPS_QG_OVERRIDE_SMOKE_TESTS || $DEVOPS_QG_OVERRIDE
      when: never
    - if: $CI_COMMIT_BRANCH =~ /^feature/
      exists:
        - k8s/$TMPL_DATACENTER/dev.yml
      when: on_success

Smoke_Feature[EASTUS-AZURE-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy_Feature[EASTUS-AZURE-DEV]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: dev
  rules:
    - if: $DEVOPS_QG_OVERRIDE_SMOKE_TESTS || $DEVOPS_QG_OVERRIDE
      when: never
    - if: $CI_COMMIT_BRANCH =~ /^feature/
      exists:
        - k8s/$TMPL_DATACENTER/dev.yml
      when: on_success

#DEV
Smoke[UO-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[UO-DEV]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: dev

Smoke[USH-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[USH-DEV]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: dev

Smoke[USJ-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[USJ-DEV]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: dev

Smoke[EASTUS-AZURE-DEV]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[EASTUS-AZURE-DEV]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: dev

#QA
Smoke[UO-QA]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[UO-QA]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: qa

Smoke[USH-QA]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[USH-QA]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: qa

Smoke[USJ-QA]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[USJ-QA]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: qa

Smoke[EASTUS-AZURE-QA]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[EASTUS-AZURE-QA]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: qa

#UAT
Smoke[UO-UAT]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[UO-UAT]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: uat

Smoke[USH-UAT]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[USH-UAT]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: uat

Smoke[USJ-UAT]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[USJ-UAT]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: uat

Smoke[EASTUS-AZURE-UAT]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[EASTUS-AZURE-UAT]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: uat

#STG
Smoke[UO-STG]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[UO-STG]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: uo
    TMPL_ENVIRONMENT_NAME: stg

Smoke[USH-STG]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[USH-STG]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: ush
    TMPL_ENVIRONMENT_NAME: stg

Smoke[USJ-STG]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[USJ-STG]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: usj
    TMPL_ENVIRONMENT_NAME: stg

Smoke[EASTUS-AZURE-STG]:
  extends: .readyAPI_template
  stage: Quality_Gate[Smoke]
  needs:
    - job: Semver
    - job: Deploy[EASTUS-AZURE-STG]
  variables:
    TMPL_RAPI_TEST_TYPE: Smoke
    TMPL_DATACENTER: eastus-azure
    TMPL_ENVIRONMENT_NAME: stg
